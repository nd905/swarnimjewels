<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart | Swarnim Jewels</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-dark: #050505;
            --card-bg: #111;
            --accent: #d4af37;
            --text-main: #eee;
            --border: 1px solid #222;
        }
        
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Lato', sans-serif; background: var(--bg-dark); color: var(--text-main); min-height: 100vh; }
        
        /* Header */
        header {
            background: #0a0a0a;
            padding: 20px 5%;
            border-bottom: var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-family: 'Cinzel', serif;
            font-size: 1.8rem;
            color: var(--accent);
            text-decoration: none;
        }
        
        nav {
            display: flex;
            gap: 30px;
        }
        
        nav a {
            color: var(--text-main);
            text-decoration: none;
            transition: color 0.3s;
            position: relative;
        }
        
        nav a:hover { color: var(--accent); }
        
        .cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--accent);
            color: black;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
        }
        
        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .page-title {
            font-family: 'Cinzel', serif;
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--accent);
        }
        
        .subtitle {
            color: #888;
            margin-bottom: 40px;
        }
        
        /* Empty Cart */
        .empty-cart {
            text-align: center;
            padding: 80px 20px;
        }
        
        .empty-cart i {
            font-size: 5rem;
            color: #333;
            margin-bottom: 20px;
        }
        
        .empty-cart h2 {
            font-family: 'Cinzel', serif;
            font-size: 1.8rem;
            margin-bottom: 15px;
        }
        
        .empty-cart p {
            color: #888;
            margin-bottom: 30px;
        }
        
        .empty-cart .cta-btn {
            display: inline-block;
            padding: 15px 40px;
            background: var(--accent);
            color: black;
            text-decoration: none;
            font-weight: 600;
            border-radius: 4px;
            transition: all 0.3s;
        }
        
        .empty-cart .cta-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
        }
        
        /* Cart Grid */
        .cart-content {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 40px;
        }
        
        /* Cart Items */
        .cart-items {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .cart-item {
            background: var(--card-bg);
            border: var(--border);
            border-radius: 8px;
            padding: 20px;
            display: grid;
            grid-template-columns: 120px 1fr auto;
            gap: 20px;
            align-items: center;
        }
        
        .item-image {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 6px;
        }
        
        .item-details h3 {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: white;
        }
        
        .item-price {
            color: var(--accent);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .quantity-control {
            display: flex;
            align-items: center;
            gap: 15px;
            background: #0a0a0a;
            padding: 8px 15px;
            border-radius: 6px;
            width: fit-content;
        }
        
        .quantity-btn {
            background: transparent;
            border: 1px solid #333;
            color: var(--accent);
            width: 30px;
            height: 30px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .quantity-btn:hover {
            background: var(--accent);
            color: black;
            border-color: var(--accent);
        }
        
        .quantity {
            font-weight: 600;
            min-width: 30px;
            text-align: center;
        }
        
        .item-actions {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 15px;
        }
        
        .item-total {
            font-size: 1.4rem;
            font-weight: 700;
            color: white;
        }
        
        .remove-btn {
            background: transparent;
            border: 1px solid #ff4444;
            color: #ff4444;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .remove-btn:hover {
            background: #ff4444;
            color: white;
        }
        
        /* Cart Summary */
        .cart-summary {
            background: var(--card-bg);
            border: var(--border);
            border-radius: 8px;
            padding: 30px;
            position: sticky;
            top: 20px;
            height: fit-content;
        }
        
        .summary-title {
            font-family: 'Cinzel', serif;
            font-size: 1.5rem;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: var(--border);
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 1rem;
        }
        
        .summary-row.total {
            font-size: 1.3rem;
            font-weight: 700;
            padding-top: 15px;
            border-top: var(--border);
            margin-top: 20px;
            color: var(--accent);
        }
        
        .checkout-btn {
            width: 100%;
            padding: 18px;
            background: var(--accent);
            color: black;
            border: none;
            border-radius: 6px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            margin-top: 25px;
            transition: all 0.3s;
        }
        
        .checkout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.3);
        }
        
        .continue-shopping {
            display: block;
            text-align: center;
            color: #888;
            text-decoration: none;
            margin-top: 20px;
            transition: color 0.3s;
        }
        
        .continue-shopping:hover { color: var(--accent); }
        
        .clear-cart-btn {
            width: 100%;
            padding: 12px;
            background: transparent;
            border: 1px solid #ff4444;
            color: #ff4444;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s;
        }
        
        .clear-cart-btn:hover {
            background: #ff4444;
            color: white;
        }
        
        /* Mobile Responsive */
        @media (max-width: 968px) {
            .cart-content {
                grid-template-columns: 1fr;
            }
            
            .cart-summary {
                position: static;
            }
            
            .cart-item {
                grid-template-columns: 80px 1fr;
                gap: 15px;
            }
            
            .item-image {
                width: 80px;
                height: 80px;
            }
            
            .item-actions {
                grid-column: 1 / -1;
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
            
            nav {
                gap: 15px;
                font-size: 0.9rem;
            }
        }

        /* === FREE SHIPPING PROGRESS BAR === */
        .shipping-progress-container {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(212, 175, 55, 0.05));
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .shipping-progress-info {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }

        .shipping-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--accent), #c9a436);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: #000;
            box-shadow: 0 3px 15px rgba(212, 175, 55, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 3px 15px rgba(212, 175, 55, 0.3);
            }
            50% {
                box-shadow: 0 3px 25px rgba(212, 175, 55, 0.6);
            }
        }

        .shipping-text {
            flex: 1;
            font-size: 1rem;
            font-weight: 600;
            color: var(--accent);
            line-height: 1.4;
        }

        .shipping-text.achieved {
            color: #4caf50;
        }

        .shipping-progress-bar {
            width: 100%;
            height: 28px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 14px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.3);
            margin-bottom: 12px;
        }

        .shipping-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #d4af37, #c9a436, #d4af37);
            background-size: 200% 100%;
            border-radius: 14px;
            transition: width 0.6s ease, background-color 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            animation: shimmer 2s infinite;
            box-shadow: 0 2px 10px rgba(212, 175, 55, 0.5);
        }

        .shipping-progress-fill.achieved {
            background: linear-gradient(90deg, #4caf50, #45a049, #4caf50);
            background-size: 200% 100%;
        }

        @keyframes shimmer {
            0% {
                background-position: 200% center;
            }
            100% {
                background-position: -200% center;
            }
        }

        .shipping-progress-percent {
            font-size: 0.75rem;
            font-weight: 700;
            color: #000;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.3);
            z-index: 1;
        }

        .shipping-threshold-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: #999;
            font-weight: 600;
        }

        .current-amount {
            color: var(--accent);
        }

        .threshold-amount {
            color: #4caf50;
        }

        /* Mobile adjustments */
        @media (max-width: 768px) {
            .shipping-progress-container {
                padding: 15px;
                margin-bottom: 20px;
            }

            .shipping-icon {
                width: 35px;
                height: 35px;
                font-size: 1rem;
            }

            .shipping-text {
                font-size: 0.9rem;
            }

            .shipping-progress-bar {
                height: 24px;
            }

            .shipping-progress-percent {
                font-size: 0.7rem;
            }

            .shipping-threshold-info {
                font-size: 0.8rem;
            }
        }

        /* === WHATSAPP FLOATING CHAT BUTTON === */
        .whatsapp-float {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
            color: white;
            width: 65px;
            height: 65px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            box-shadow: 0 5px 25px rgba(37, 211, 102, 0.5);
            z-index: 9999;
            cursor: pointer;
            transition: all 0.4s ease;
            text-decoration: none;
            animation: whatsappPulse 2s infinite;
        }

        .whatsapp-float:hover {
            transform: scale(1.15) translateY(-5px);
            box-shadow: 0 10px 40px rgba(37, 211, 102, 0.7);
            background: linear-gradient(135deg, #128C7E 0%, #25D366 100%);
        }

        .whatsapp-icon {
            font-size: 2rem;
            display: block;
        }

        .whatsapp-text {
            position: absolute;
            right: 80px;
            background: white;
            color: #128C7E;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 0.95rem;
            font-weight: 600;
            white-space: nowrap;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            opacity: 0;
            transform: translateX(20px);
            transition: all 0.4s ease;
            pointer-events: none;
        }

        .whatsapp-float:hover .whatsapp-text {
            opacity: 1;
            transform: translateX(0);
        }

        @keyframes whatsappPulse {
            0%, 100% {
                box-shadow: 0 5px 25px rgba(37, 211, 102, 0.5);
            }
            50% {
                box-shadow: 0 5px 35px rgba(37, 211, 102, 0.8), 
                           0 0 0 15px rgba(37, 211, 102, 0.1),
                           0 0 0 30px rgba(37, 211, 102, 0.05);
            }
        }

        @media (max-width: 768px) {
            .whatsapp-float {
                bottom: 20px;
                right: 20px;
                width: 60px;
                height: 60px;
                font-size: 1.8rem;
            }

            .whatsapp-icon {
                font-size: 1.8rem;
            }

            .whatsapp-text {
                display: none;
            }

            .whatsapp-float:active {
                transform: scale(0.95);
            }
        }

        /* === PREMIUM SCROLL ANIMATIONS === */
        
        /* Fade in from bottom */
        .scroll-reveal {
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }

        .scroll-reveal.revealed {
            opacity: 1;
            transform: translateY(0);
        }

        /* Fade in from left */
        .scroll-reveal-left {
            opacity: 0;
            transform: translateX(-50px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }

        .scroll-reveal-left.revealed {
            opacity: 1;
            transform: translateX(0);
        }

        /* Fade in from right */
        .scroll-reveal-right {
            opacity: 0;
            transform: translateX(50px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }

        .scroll-reveal-right.revealed {
            opacity: 1;
            transform: translateX(0);
        }

        /* Scale up fade in */
        .scroll-reveal-scale {
            opacity: 0;
            transform: scale(0.9);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }

        .scroll-reveal-scale.revealed {
            opacity: 1;
            transform: scale(1);
        }

        /* Smooth scroll */
        html {
            scroll-behavior: smooth;
        }

        /* Reduce motion for accessibility */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <a href="index.html" class="logo">SWARNIM</a>
        <nav>
            <a href="index.html"><i class="fa-solid fa-home"></i> Home</a>
            <a href="about-us.html"><i class="fa-solid fa-info-circle"></i> About</a>
            <a href="contact.html"><i class="fa-solid fa-envelope"></i> Contact</a>
            <a href="cart.html" style="position: relative;">
                <i class="fa-solid fa-shopping-cart"></i> Cart
                <span class="cart-badge">0</span>
            </a>
            <a id="accountNavBtn" href="login.html"><i class="fa-solid fa-user"></i> Account</a>
        </nav>
    </header>

    <!-- Main Container -->
    <div class="container">
        <h1 class="page-title">Shopping Cart</h1>
        <p class="subtitle" id="itemCount">Your cart is empty</p>

        <!-- Empty Cart Message -->
        <div class="empty-cart" id="emptyCart" style="display: none;">
            <i class="fa-solid fa-shopping-cart"></i>
            <h2>Your cart is empty</h2>
            <p>Looks like you haven't added anything to your cart yet.</p>
            <a href="index.html" class="cta-btn">
                <i class="fa-solid fa-arrow-left"></i> Continue Shopping
            </a>
        </div>

        <!-- Cart Content -->
        <div class="cart-content" id="cartContent" style="display: none;">
            <!-- Cart Items -->
            <div class="cart-items" id="cartItems">
                <!-- Items will be loaded here by JavaScript -->
            </div>

            <!-- Cart Summary -->
            <div class="cart-summary">
                <h2 class="summary-title">Order Summary</h2>
                
                <!-- Free Shipping Progress Bar -->
                <div class="shipping-progress-container" id="shippingProgressContainer">
                    <div class="shipping-progress-info">
                        <div class="shipping-icon">
                            <i class="fa-solid fa-truck-fast"></i>
                        </div>
                        <div class="shipping-text" id="shippingText">
                            Add â‚¹250 more for FREE shipping!
                        </div>
                    </div>
                    <div class="shipping-progress-bar">
                        <div class="shipping-progress-fill" id="shippingProgressFill" style="width: 0%">
                            <span class="shipping-progress-percent" id="shippingProgressPercent">0%</span>
                        </div>
                    </div>
                    <div class="shipping-threshold-info">
                        <span class="current-amount" id="currentAmount">â‚¹0</span>
                        <span class="threshold-amount">â‚¹1,299</span>
                    </div>
                </div>
                
                <div class="summary-row">
                    <span>Subtotal (<span id="totalItems">0</span> items):</span>
                    <span id="subtotal">â‚¹0</span>
                </div>
                
                <div class="summary-row">
                    <span>Shipping:</span>
                    <span id="shippingCharge" style="color: #4caf50;">FREE</span>
                </div>
                
                <div class="summary-row total">
                    <span>Total:</span>
                    <span id="grandTotal">â‚¹0</span>
                </div>
                
                <button class="checkout-btn" onclick="proceedToCheckout()">
                    <i class="fa-solid fa-lock"></i> Proceed to Checkout
                </button>
                
                <a href="index.html" class="continue-shopping">
                    <i class="fa-solid fa-arrow-left"></i> Continue Shopping
                </a>
                
                <button class="clear-cart-btn" onclick="clearCartConfirm()">
                    <i class="fa-solid fa-trash"></i> Clear Cart
                </button>
            </div>
        </div>
    </div>

    <!-- Shopping Cart System -->
    <script src="cart.js"></script>
    
    <script>
        // Load and display cart
        function loadCart() {
            const cart = ShoppingCart.getCart();
            const cartItemsContainer = document.getElementById('cartItems');
            const emptyCart = document.getElementById('emptyCart');
            const cartContent = document.getElementById('cartContent');
            const itemCount = document.getElementById('itemCount');
            
            if (cart.length === 0) {
                // Show empty cart message
                emptyCart.style.display = 'block';
                cartContent.style.display = 'none';
                itemCount.textContent = 'Your cart is empty';
            } else {
                // Show cart content
                emptyCart.style.display = 'none';
                cartContent.style.display = 'grid';
                
                const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
                itemCount.textContent = `${totalItems} item${totalItems > 1 ? 's' : ''} in your cart`;
                
                // Render cart items
                cartItemsContainer.innerHTML = cart.map(item => `
                    <div class="cart-item">
                        <img src="${item.image}" alt="${item.name}" class="item-image">
                        
                        <div class="item-details">
                            <h3>${item.name}</h3>
                            <div class="item-price">â‚¹${item.price} each</div>
                            <div class="quantity-control">
                                <button class="quantity-btn" onclick="updateQuantity('${item.id}', ${item.quantity - 1})">
                                    <i class="fa-solid fa-minus"></i>
                                </button>
                                <span class="quantity">${item.quantity}</span>
                                <button class="quantity-btn" onclick="updateQuantity('${item.id}', ${item.quantity + 1})">
                                    <i class="fa-solid fa-plus"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="item-actions">
                            <div class="item-total">â‚¹${item.price * item.quantity}</div>
                            <button class="remove-btn" onclick="removeItem('${item.id}')">
                                <i class="fa-solid fa-trash"></i> Remove
                            </button>
                        </div>
                    </div>
                `).join('');
                
                // Update summary
                updateSummary();
            }
        }
        
        // Update quantity
        function updateQuantity(productId, newQuantity) {
            if (newQuantity < 1) {
                if (confirm('Remove this item from cart?')) {
                    ShoppingCart.removeItem(productId);
                    loadCart();
                }
            } else {
                ShoppingCart.updateQuantity(productId, newQuantity);
                loadCart();
            }
        }
        
        // Remove item
        function removeItem(productId) {
            if (confirm('Are you sure you want to remove this item?')) {
                ShoppingCart.removeItem(productId);
                loadCart();
            }
        }
        
        // Update summary
        function updateSummary() {
            const cart = ShoppingCart.getCart();
            const subtotal = ShoppingCart.getTotal();
            const itemCount = cart.reduce((sum, item) => sum + item.quantity, 0);
            
            // Free shipping threshold
            const FREE_SHIPPING_THRESHOLD = 1299;
            const SHIPPING_CHARGE = 75;
            
            // Calculate shipping progress
            const progressPercent = Math.min((subtotal / FREE_SHIPPING_THRESHOLD) * 100, 100);
            const remainingAmount = Math.max(FREE_SHIPPING_THRESHOLD - subtotal, 0);
            const isFreeShipping = subtotal >= FREE_SHIPPING_THRESHOLD;
            
            // Update subtotal
            document.getElementById('totalItems').textContent = itemCount;
            document.getElementById('subtotal').textContent = 'â‚¹' + subtotal;
            
            // Update shipping progress bar
            const shippingProgressContainer = document.getElementById('shippingProgressContainer');
            const shippingProgressFill = document.getElementById('shippingProgressFill');
            const shippingProgressPercent = document.getElementById('shippingProgressPercent');
            const shippingText = document.getElementById('shippingText');
            const currentAmount = document.getElementById('currentAmount');
            const shippingCharge = document.getElementById('shippingCharge');
            
            if (shippingProgressContainer && subtotal > 0) {
                shippingProgressContainer.style.display = 'block';
                
                // Update progress bar
                shippingProgressFill.style.width = progressPercent + '%';
                shippingProgressPercent.textContent = Math.round(progressPercent) + '%';
                currentAmount.textContent = 'â‚¹' + subtotal;
                
                if (isFreeShipping) {
                    // Free shipping achieved!
                    shippingText.textContent = 'ðŸŽ‰ You got FREE shipping!';
                    shippingText.classList.add('achieved');
                    shippingProgressFill.classList.add('achieved');
                    shippingCharge.innerHTML = '<span style="color: #4caf50; font-weight: 700;">FREE</span>';
                } else {
                    // Still need more for free shipping
                    shippingText.textContent = `Add â‚¹${remainingAmount} more for FREE shipping!`;
                    shippingText.classList.remove('achieved');
                    shippingProgressFill.classList.remove('achieved');
                    shippingCharge.innerHTML = '<span style="color: #ff9800;">â‚¹' + SHIPPING_CHARGE + '</span>';
                }
            } else if (shippingProgressContainer) {
                shippingProgressContainer.style.display = 'none';
            }
            
            // Calculate final total
            const shippingFee = isFreeShipping ? 0 : (subtotal > 0 ? SHIPPING_CHARGE : 0);
            const grandTotal = subtotal + shippingFee;
            
            document.getElementById('grandTotal').textContent = 'â‚¹' + grandTotal;
        }
        
        // Clear cart with confirmation
        function clearCartConfirm() {
            if (confirm('Are you sure you want to clear your entire cart?')) {
                ShoppingCart.clearCart();
                loadCart();
            }
        }
        
        // Proceed to checkout
        function proceedToCheckout() {
            const cart = ShoppingCart.getCart();
            if (cart.length === 0) {
                alert('Your cart is empty!');
                return;
            }
            window.location.href = 'checkout.html';
        }
        
        // Load cart on page load
        loadCart();
    </script>

    <!-- WhatsApp Floating Chat Button -->
    <a href="https://wa.me/918218768602?text=Hi!%20I%20need%20help%20with%20my%20cart.%20Can%20you%20assist%20me%3F" 
       class="whatsapp-float" 
       target="_blank" 
       rel="noopener noreferrer"
       aria-label="Chat on WhatsApp">
        <i class="fa-brands fa-whatsapp whatsapp-icon"></i>
        <span class="whatsapp-text">Chat with us</span>
    </a>

    <!-- Premium Scroll Animations Script -->
    <script>
        // Intersection Observer for scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const scrollObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('revealed');
                }
            });
        }, observerOptions);

        // Initialize scroll animations
        function initScrollAnimations() {
            const revealElements = document.querySelectorAll(
                '.scroll-reveal, .scroll-reveal-left, .scroll-reveal-right, .scroll-reveal-scale'
            );
            
            revealElements.forEach(el => {
                scrollObserver.observe(el);
            });
        }

        // Add scroll reveal classes to cart elements
        window.addEventListener('load', () => {
            // Add to cart items
            const cartItems = document.querySelectorAll('.cart-item');
            cartItems.forEach((item, index) => {
                item.classList.add('scroll-reveal');
                item.setAttribute('data-delay', Math.min(index + 1, 3));
            });

            // Add to cart summary
            const cartSummary = document.querySelector('.cart-summary');
            if (cartSummary) {
                cartSummary.classList.add('scroll-reveal-right');
            }

            // Add to shipping progress
            const shippingProgress = document.getElementById('shippingProgressContainer');
            if (shippingProgress) {
                shippingProgress.classList.add('scroll-reveal-scale');
            }

            // Initialize observer
            initScrollAnimations();
        });

        // Re-initialize when cart updates
        const originalLoadCart = window.loadCart;
        window.loadCart = function() {
            if (originalLoadCart) originalLoadCart();
            setTimeout(() => {
                const cartItems = document.querySelectorAll('.cart-item');
                cartItems.forEach((item, index) => {
                    if (!item.classList.contains('scroll-reveal')) {
                        item.classList.add('scroll-reveal');
                        item.setAttribute('data-delay', Math.min(index + 1, 3));
                    }
                });
                initScrollAnimations();
            }, 100);
        };

        // Initialize on DOMContentLoaded
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initScrollAnimations);
        } else {
            initScrollAnimations();
        }
    </script>

    <!-- Shopping Cart Library -->
    <script src="shopping-cart.js"></script>
    <script src="user-system.js"></script>

</body>
</html>
