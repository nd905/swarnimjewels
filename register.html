<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, follow">
  <title>Create Account | Swarnim Jewels</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root{--bg:#050505;--card:#111;--gold:#d4af37;--gold2:#f0d060;--text:#eee;--muted:#888;--border:rgba(212,175,55,.2);--err:#e57373;--ok:#81c784;}
    *{box-sizing:border-box;margin:0;padding:0;}
    html,body{overflow-x:hidden;max-width:100%;}
    body{font-family:'Lato',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;display:flex;flex-direction:column;}
    header{background:#0a0a0a;padding:18px 5%;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;}
    .logo{font-family:'Cinzel',serif;font-size:1.8rem;color:var(--gold);text-decoration:none;}
    nav{display:flex;gap:24px;align-items:center;}
    nav a{color:var(--text);text-decoration:none;font-size:.9rem;transition:color .3s;}
    nav a:hover{color:var(--gold);}
    .cart-wrap{position:relative;}
    .cart-badge{position:absolute;top:-6px;right:-8px;background:var(--gold);color:#000;width:18px;height:18px;border-radius:50%;font-size:.65rem;font-weight:700;display:none;align-items:center;justify-content:center;}

    .page{flex:1;display:flex;align-items:center;justify-content:center;padding:50px 20px;}
    .card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:46px 44px;width:100%;max-width:480px;box-shadow:0 20px 60px rgba(0,0,0,.6);}
    .card-icon{width:60px;height:60px;border-radius:50%;background:rgba(212,175,55,.1);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;margin:0 auto 18px;font-size:1.5rem;color:var(--gold);}
    .card h1{font-family:'Cinzel',serif;font-size:1.6rem;color:var(--gold);text-align:center;}
    .card-sub{color:var(--muted);font-size:.88rem;text-align:center;margin-top:6px;margin-bottom:26px;}

    .benefits{background:rgba(212,175,55,.05);border:1px solid var(--border);border-radius:8px;padding:14px 18px;margin-bottom:24px;font-size:.8rem;color:var(--muted);}
    .benefits ul{list-style:none;display:flex;flex-wrap:wrap;gap:6px 18px;margin-top:8px;}
    .benefits li{display:flex;align-items:center;gap:6px;color:#bbb;}
    .benefits li i{color:var(--gold);font-size:.75rem;}

    .alert{border-radius:7px;padding:12px 16px;font-size:.85rem;margin-bottom:18px;display:none;align-items:center;gap:10px;}
    .alert.error{background:rgba(229,115,115,.1);border:1px solid rgba(229,115,115,.35);color:var(--err);}
    .alert.success{background:rgba(129,199,132,.1);border:1px solid rgba(129,199,132,.35);color:var(--ok);}
    .alert.show{display:flex;}

    .form-group{margin-bottom:18px;}
    label{display:block;font-size:.82rem;color:var(--muted);margin-bottom:7px;}
    .iw{position:relative;}
    .iw i.il{position:absolute;left:14px;top:50%;transform:translateY(-50%);color:var(--muted);font-size:.85rem;pointer-events:none;}
    .iw input{width:100%;background:#1a1a1a;border:1px solid rgba(255,255,255,.08);border-radius:7px;color:var(--text);font-family:'Lato',sans-serif;font-size:.95rem;padding:12px 44px 12px 40px;outline:none;transition:border .25s;}
    .iw input:focus{border-color:var(--gold);}
    .iw input::placeholder{color:#444;}
    .eye{position:absolute;right:14px;top:50%;transform:translateY(-50%);color:var(--muted);cursor:pointer;font-size:.85rem;background:none;border:none;padding:0;}
    .eye:hover{color:var(--gold);}

    .strength-bar{height:3px;background:#222;border-radius:3px;margin-top:8px;overflow:hidden;}
    .strength-fill{height:100%;border-radius:3px;width:0;transition:width .3s,background .3s;}
    .strength-label{font-size:.75rem;color:var(--muted);margin-top:4px;}

    .terms-row{display:flex;align-items:flex-start;gap:10px;margin-bottom:22px;font-size:.82rem;color:var(--muted);}
    .terms-row input{accent-color:var(--gold);margin-top:2px;cursor:pointer;flex-shrink:0;}
    .terms-row a{color:var(--gold);text-decoration:none;}
    .terms-row a:hover{text-decoration:underline;}

    .btn-gold{width:100%;padding:13px;background:linear-gradient(135deg,#c9a227,var(--gold2));border:none;border-radius:7px;color:#000;font-family:'Cinzel',serif;font-size:.95rem;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:opacity .2s;}
    .btn-gold:hover{opacity:.9;}
    .btn-gold:disabled{opacity:.5;cursor:not-allowed;}

    .card-foot{text-align:center;margin-top:20px;font-size:.85rem;color:var(--muted);}
    .card-foot a{color:var(--gold);text-decoration:none;font-weight:700;}

    @keyframes spin{to{transform:rotate(360deg);}}
    .spinner{width:16px;height:16px;border:2px solid rgba(0,0,0,.3);border-top-color:#000;border-radius:50%;animation:spin .6s linear infinite;}

    footer{text-align:center;padding:24px;color:var(--muted);font-size:.8rem;border-top:1px solid rgba(255,255,255,.05);}
    footer a{color:var(--gold);text-decoration:none;}
    @media(max-width:480px){.card{padding:32px 20px;}}
  </style>
</head>
<body>

<header>
  <a href="index.html" class="logo">SWARNIM</a>
  <nav>
    <a href="index.html"><i class="fa-solid fa-home"></i> Home</a>
    <a href="about-us.html"><i class="fa-solid fa-info-circle"></i> About</a>
    <a href="contact.html"><i class="fa-solid fa-envelope"></i> Contact</a>
    <a class="cart-wrap" href="cart.html">
      <i class="fa-solid fa-shopping-cart"></i> Cart
      <span class="cart-badge cart-count">0</span>
    </a>
    <a id="accountNavBtn" href="login.html"><i class="fa-solid fa-user"></i> Account</a>
  </nav>
</header>

<main class="page">
  <div class="card">
    <div class="card-icon"><i class="fa-solid fa-user-plus"></i></div>
    <h1>Create Account</h1>
    <p class="card-sub">Join Swarnim Jewels for exclusive benefits</p>

    <div class="benefits">
      With an account you get:
      <ul>
        <li><i class="fa-solid fa-check"></i> Cart saved across devices</li>
        <li><i class="fa-solid fa-check"></i> Order tracking</li>
        <li><i class="fa-solid fa-check"></i> Saved addresses</li>
        <li><i class="fa-solid fa-check"></i> Wishlist</li>
      </ul>
    </div>

    <div class="alert error" id="alertBox">
      <i class="fa-solid fa-circle-exclamation"></i>
      <span id="alertMsg"></span>
    </div>

    <form onsubmit="handleRegister(event)">
      <div class="form-group">
        <label for="name">Full Name *</label>
        <div class="iw">
          <i class="fa-solid fa-user il"></i>
          <input type="text" id="name" placeholder="Your full name" autocomplete="name" required>
        </div>
      </div>
      <div class="form-group">
        <label for="email">Email Address *</label>
        <div class="iw">
          <i class="fa-solid fa-envelope il"></i>
          <input type="email" id="email" placeholder="your@email.com" autocomplete="email" required>
        </div>
      </div>
      <div class="form-group">
        <label for="phone">Phone <span style="color:#555">(optional)</span></label>
        <div class="iw">
          <i class="fa-solid fa-phone il"></i>
          <input type="tel" id="phone" placeholder="+91 98765 43210" autocomplete="tel">
        </div>
      </div>
      <div class="form-group">
        <label for="password">Password *</label>
        <div class="iw">
          <i class="fa-solid fa-lock il"></i>
          <input type="password" id="password" placeholder="Minimum 6 characters" autocomplete="new-password" required minlength="6" oninput="checkStrength(this.value)">
          <button type="button" class="eye" onclick="togglePwd('password',this)"><i class="fa-solid fa-eye"></i></button>
        </div>
        <div class="strength-bar"><div class="strength-fill" id="sBar"></div></div>
        <div class="strength-label" id="sLabel"></div>
      </div>
      <div class="form-group">
        <label for="confirmPassword">Confirm Password *</label>
        <div class="iw">
          <i class="fa-solid fa-lock il"></i>
          <input type="password" id="confirmPassword" placeholder="Repeat your password" autocomplete="new-password" required>
          <button type="button" class="eye" onclick="togglePwd('confirmPassword',this)"><i class="fa-solid fa-eye"></i></button>
        </div>
      </div>
      <div class="terms-row">
        <input type="checkbox" id="terms" required>
        <span>I agree to the <a href="privacy-policy.html" target="_blank">Privacy Policy</a> and <a href="refund-policy.html" target="_blank">Refund Policy</a></span>
      </div>
      <button type="submit" class="btn-gold" id="regBtn">
        <i class="fa-solid fa-user-plus"></i> Create Account
      </button>
    </form>

    <div class="card-foot">Already have an account? <a href="login.html">Sign In</a></div>
    <div class="card-foot" style="margin-top:10px"><a href="index.html"><i class="fa-solid fa-arrow-left"></i> Continue as Guest</a></div>
  </div>
</main>

<footer>&copy; 2026 Swarnim Jewels &middot; <a href="privacy-policy.html">Privacy</a> &middot; <a href="contact.html">Support</a></footer>

<script src="shopping-cart.js"></script>
<script src="user-system.js"></script>
<script>
  if (UserSystem.isLoggedIn()) window.location.href = UserSystem.safeRedirect('account.html');

  function showAlert(msg, type='error') {
    const box = document.getElementById('alertBox');
    box.className = 'alert ' + type + ' show';
    document.getElementById('alertMsg').textContent = msg;
    box.scrollIntoView({ behavior:'smooth', block:'nearest' });
  }
  function hideAlert() { document.getElementById('alertBox').className = 'alert error'; }

  function setLoading(on) {
    const btn = document.getElementById('regBtn');
    btn.disabled = on;
    btn.innerHTML = on
      ? '<div class="spinner"></div> Creating account…'
      : '<i class="fa-solid fa-user-plus"></i> Create Account';
  }

  function togglePwd(id, btn) {
    const inp  = document.getElementById(id);
    const icon = btn.querySelector('i');
    const show = inp.type === 'password';
    inp.type = show ? 'text' : 'password';
    icon.className = show ? 'fa-solid fa-eye-slash' : 'fa-solid fa-eye';
  }

  function checkStrength(val) {
    const bar = document.getElementById('sBar'), lbl = document.getElementById('sLabel');
    if (!val) { bar.style.width='0'; lbl.textContent=''; return; }
    // Always show Too short if under minimum — regardless of character variety
    if (val.length < 6) {
      bar.style.width='20%'; bar.style.background='#e57373';
      lbl.textContent='Too short'; lbl.style.color='#e57373'; return;
    }
    let s = 0;
    if (val.length >= 6)  s++;
    if (val.length >= 10) s++;
    if (/[A-Z]/.test(val)) s++;
    if (/[0-9]/.test(val)) s++;
    if (/[^A-Za-z0-9]/.test(val)) s++;
    const lvl = [
      { w:'20%', c:'#e57373', t:'Too short' },
      { w:'40%', c:'#ff8a65', t:'Weak' },
      { w:'60%', c:'#ffb74d', t:'Fair' },
      { w:'80%', c:'#aed581', t:'Good' },
      { w:'100%',c:'#81c784', t:'Strong ✓' }
    ][Math.min(s,4)];
    bar.style.width = lvl.w; bar.style.background = lvl.c;
    lbl.textContent = lvl.t; lbl.style.color = lvl.c;
  }

  async function handleRegister(e) {
    e.preventDefault();
    hideAlert();
    const name     = document.getElementById('name').value.trim();
    const email    = document.getElementById('email').value.trim();
    const phone    = document.getElementById('phone').value.trim();
    const password = document.getElementById('password').value;
    const confirm  = document.getElementById('confirmPassword').value;
    if (!name) { showAlert('Full name is required.'); return; }
    if (password !== confirm) { showAlert('Passwords do not match.'); return; }
    if (password.length < 6) { showAlert('Password must be at least 6 characters.'); return; }
    setLoading(true);
    try {
      const result = await UserSystem.register({ name, email, phone, password });
      if (result.success) {
        showAlert('Account created! Redirecting…', 'success');
        setTimeout(() => window.location.href = UserSystem.safeRedirect('account.html'), 900);
      } else {
        showAlert(result.error || 'Registration failed. Please try again.');
        setLoading(false);
      }
    } catch(err) {
      showAlert('Network error. Please check your connection.');
      setLoading(false);
    }
  }
</script>
</body>
</html>
