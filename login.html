<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, follow">
  <title>Sign In | Swarnim Jewels</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --bg:#050505; --card:#111; --gold:#d4af37; --gold2:#f0d060;
      --text:#eee; --muted:#888; --border:rgba(212,175,55,.2);
      --err:#e57373; --ok:#81c784;
    }
    *{box-sizing:border-box;margin:0;padding:0;}
    body{font-family:'Lato',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;display:flex;flex-direction:column;}
    header{background:#0a0a0a;padding:18px 5%;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;}
    .logo{font-family:'Cinzel',serif;font-size:1.8rem;color:var(--gold);text-decoration:none;}
    nav{display:flex;gap:24px;align-items:center;}
    nav a{color:var(--text);text-decoration:none;font-size:.9rem;transition:color .3s;}
    nav a:hover{color:var(--gold);}
    .cart-wrap{position:relative;}
    .cart-badge{position:absolute;top:-6px;right:-8px;background:var(--gold);color:#000;width:18px;height:18px;border-radius:50%;font-size:.65rem;font-weight:700;display:none;align-items:center;justify-content:center;}

    .page{flex:1;display:flex;align-items:center;justify-content:center;padding:60px 20px;}
    .card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:50px 44px;width:100%;max-width:460px;box-shadow:0 20px 60px rgba(0,0,0,.6);}
    .card-icon{width:60px;height:60px;border-radius:50%;background:rgba(212,175,55,.1);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;margin:0 auto 18px;font-size:1.5rem;color:var(--gold);}
    .card h1{font-family:'Cinzel',serif;font-size:1.6rem;color:var(--gold);text-align:center;}
    .card-sub{color:var(--muted);font-size:.88rem;text-align:center;margin-top:6px;margin-bottom:34px;}

    .alert{border-radius:7px;padding:12px 16px;font-size:.85rem;margin-bottom:18px;display:none;align-items:center;gap:10px;}
    .alert.error{background:rgba(229,115,115,.1);border:1px solid rgba(229,115,115,.35);color:var(--err);}
    .alert.success{background:rgba(129,199,132,.1);border:1px solid rgba(129,199,132,.35);color:var(--ok);}
    .alert.show{display:flex;}

    .form-group{margin-bottom:20px;}
    label{display:block;font-size:.82rem;color:var(--muted);margin-bottom:7px;}
    .iw{position:relative;}
    .iw i.il{position:absolute;left:14px;top:50%;transform:translateY(-50%);color:var(--muted);font-size:.85rem;pointer-events:none;}
    .iw input{width:100%;background:#1a1a1a;border:1px solid rgba(255,255,255,.08);border-radius:7px;color:var(--text);font-family:'Lato',sans-serif;font-size:.95rem;padding:12px 44px 12px 40px;outline:none;transition:border .25s;}
    .iw input:focus{border-color:var(--gold);}
    .iw input::placeholder{color:#444;}
    .eye{position:absolute;right:14px;top:50%;transform:translateY(-50%);color:var(--muted);cursor:pointer;font-size:.85rem;background:none;border:none;padding:0;}
    .eye:hover{color:var(--gold);}

    .row-mid{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;font-size:.82rem;}
    .remember{display:flex;align-items:center;gap:7px;cursor:pointer;color:var(--muted);}
    .remember input{accent-color:var(--gold);}
    .flink{color:var(--gold);text-decoration:none;background:none;border:none;cursor:pointer;font-size:.82rem;}
    .flink:hover{text-decoration:underline;}

    .btn-gold{width:100%;padding:13px;background:linear-gradient(135deg,#c9a227,var(--gold2));border:none;border-radius:7px;color:#000;font-family:'Cinzel',serif;font-size:.95rem;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;transition:opacity .2s;}
    .btn-gold:hover{opacity:.9;}
    .btn-gold:disabled{opacity:.5;cursor:not-allowed;}

    .card-foot{text-align:center;margin-top:22px;font-size:.85rem;color:var(--muted);}
    .card-foot a{color:var(--gold);text-decoration:none;font-weight:700;}

    @keyframes spin{to{transform:rotate(360deg);}}
    .spinner{width:16px;height:16px;border:2px solid rgba(0,0,0,.3);border-top-color:#000;border-radius:50%;animation:spin .6s linear infinite;}

    /* forgot modal */
    .overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.75);z-index:9999;align-items:center;justify-content:center;padding:20px;}
    .overlay.open{display:flex;}
    .modal{background:#111;border:1px solid var(--border);border-radius:12px;padding:38px;width:100%;max-width:400px;}
    .modal h3{font-family:'Cinzel',serif;color:var(--gold);margin-bottom:8px;}
    .modal p{color:var(--muted);font-size:.85rem;margin-bottom:20px;}
    .modal-foot{display:flex;gap:12px;margin-top:16px;}
    .btn-ghost{flex:1;padding:11px;background:#1a1a1a;border:1px solid #333;border-radius:7px;color:var(--text);cursor:pointer;}
    .btn-ghost:hover{border-color:var(--gold);}
    .forgot-alert{border-radius:7px;padding:10px 14px;font-size:.82rem;margin-bottom:12px;display:none;}
    .forgot-alert.show{display:block;}
    .forgot-alert.err{background:rgba(229,115,115,.1);border:1px solid rgba(229,115,115,.35);color:var(--err);}
    .forgot-alert.ok{background:rgba(129,199,132,.1);border:1px solid rgba(129,199,132,.35);color:var(--ok);}

    footer{text-align:center;padding:24px;color:var(--muted);font-size:.8rem;border-top:1px solid rgba(255,255,255,.05);}
    footer a{color:var(--gold);text-decoration:none;}
    @media(max-width:480px){.card{padding:36px 22px;}}
  </style>
</head>
<body>

<header>
  <a href="index.html" class="logo">SWARNIM</a>
  <nav>
    <a href="index.html"><i class="fa-solid fa-home"></i> Home</a>
    <a href="about-us.html"><i class="fa-solid fa-info-circle"></i> About</a>
    <a href="contact.html"><i class="fa-solid fa-envelope"></i> Contact</a>
    <a class="cart-wrap" href="cart.html">
      <i class="fa-solid fa-shopping-cart"></i> Cart
      <span class="cart-badge cart-count">0</span>
    </a>
    <a id="accountNavBtn" href="login.html"><i class="fa-solid fa-user"></i> Account</a>
  </nav>
</header>

<main class="page">
  <div class="card">
    <div class="card-icon"><i class="fa-solid fa-lock"></i></div>
    <h1>Welcome Back</h1>
    <p class="card-sub">Sign in to your Swarnim Jewels account</p>

    <div class="alert error" id="alertBox">
      <i class="fa-solid fa-circle-exclamation"></i>
      <span id="alertMsg"></span>
    </div>

    <form onsubmit="handleLogin(event)">
      <div class="form-group">
        <label>Email Address</label>
        <div class="iw">
          <i class="fa-solid fa-envelope il"></i>
          <input type="email" id="email" placeholder="your@email.com" autocomplete="email" required>
        </div>
      </div>
      <div class="form-group">
        <label>Password</label>
        <div class="iw">
          <i class="fa-solid fa-lock il"></i>
          <input type="password" id="password" placeholder="Your password" autocomplete="current-password" required>
          <button type="button" class="eye" onclick="togglePwd('password',this)"><i class="fa-solid fa-eye"></i></button>
        </div>
      </div>
      <div class="row-mid">
        <label class="remember">
          <input type="checkbox" id="remember"> Remember me
        </label>
        <button type="button" class="flink" onclick="openForgot()">Forgot password?</button>
      </div>
      <button type="submit" class="btn-gold" id="loginBtn">
        <i class="fa-solid fa-sign-in-alt"></i> Sign In
      </button>
    </form>

    <div class="card-foot" style="margin-top:24px">Don't have an account? <a href="register.html">Create Account</a></div>
    <div class="card-foot" style="margin-top:10px"><a href="index.html"><i class="fa-solid fa-arrow-left"></i> Continue as Guest</a></div>
  </div>
</main>

<!-- Forgot Password Modal -->
<div class="overlay" id="forgotOverlay">
  <div class="modal">
    <h3>Reset Password</h3>
    <p>Enter your email and we'll send reset instructions.</p>
    <div class="forgot-alert" id="forgotAlert"></div>
    <div class="iw">
      <i class="fa-solid fa-envelope il"></i>
      <input type="email" id="forgotEmail" placeholder="your@email.com" style="width:100%;background:#1a1a1a;border:1px solid rgba(255,255,255,.08);border-radius:7px;color:#eee;font-size:.95rem;padding:12px 14px 12px 40px;outline:none;">
    </div>
    <div class="modal-foot">
      <button class="btn-ghost" onclick="closeForgot()">Cancel</button>
      <button class="btn-gold" id="forgotBtn" onclick="submitForgot()" style="flex:2">Send Reset Link</button>
    </div>
  </div>
</div>

<footer>� 2026 Swarnim Jewels � <a href="privacy-policy.html">Privacy</a> � <a href="contact.html">Support</a></footer>

<script src="shopping-cart.js"></script>
<script src="user-system.js"></script>
<script>
  // Redirect if already logged in
  if (UserSystem.isLoggedIn()) {
    window.location.href = UserSystem.safeRedirect('account.html');
  }

  function showAlert(msg, type='error') {
    const box = document.getElementById('alertBox');
    box.className = 'alert ' + type + ' show';
    document.getElementById('alertMsg').textContent = msg;
  }
  function hideAlert() {
    const box = document.getElementById('alertBox');
    box.className = 'alert error';
  }
  function setLoading(on) {
    const btn = document.getElementById('loginBtn');
    btn.disabled = on;
    btn.innerHTML = on
      ? '<div class="spinner"></div> Signing in…'
      : '<i class="fa-solid fa-sign-in-alt"></i> Sign In';
  }

  async function handleLogin(e) {
    e.preventDefault();
    hideAlert();
    setLoading(true);
    const email      = document.getElementById('email').value.trim();
    const password   = document.getElementById('password').value;
    const rememberMe = document.getElementById('remember').checked;
    try {
      const result = await UserSystem.login({ email, password, rememberMe });
      if (result.success) {
        showAlert('Login successful! Redirecting…', 'success');
        setTimeout(() => window.location.href = UserSystem.safeRedirect('account.html'), 800);
      } else {
        showAlert(result.error || 'Incorrect email or password.');
        setLoading(false);
      }
    } catch(err) {
      showAlert('Network error. Please check your connection.');
      setLoading(false);
    }
  }

  function togglePwd(id, btn) {
    const inp  = document.getElementById(id);
    const icon = btn.querySelector('i');
    const show = inp.type === 'password';
    inp.type = show ? 'text' : 'password';
    icon.className = show ? 'fa-solid fa-eye-slash' : 'fa-solid fa-eye';
  }

  function openForgot()  { document.getElementById('forgotOverlay').classList.add('open'); }
  function closeForgot() {
    document.getElementById('forgotOverlay').classList.remove('open');
    document.getElementById('forgotEmail').value = '';
    const a = document.getElementById('forgotAlert');
    a.className = 'forgot-alert'; a.textContent = '';
  }

  document.getElementById('forgotOverlay').addEventListener('click', function(e) {
    if (e.target === this) closeForgot();
  });
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') closeForgot();
  });

  async function submitForgot() {
    const email = document.getElementById('forgotEmail').value.trim();
    const alert = document.getElementById('forgotAlert');
    if (!email) {
      alert.className = 'forgot-alert show err';
      alert.textContent = 'Please enter your email address.';
      return;
    }
    const btn = document.getElementById('forgotBtn');
    btn.disabled = true;
    btn.innerHTML = '<div class="spinner" style="border-top-color:#000;border-color:rgba(0,0,0,.2)"></div> Sending…';
    // Simulate — replace with real email API when available
    await new Promise(r => setTimeout(r, 1200));
    alert.className = 'forgot-alert show ok';
    alert.textContent = 'If that email exists, a reset link has been sent.';
    btn.disabled = false;
    btn.innerHTML = 'Send Reset Link';
  }
</script>
</body>
</html>
